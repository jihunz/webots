<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>UR10e Control Interface</title>
  <link rel="icon" type="image/png" href="https://cyberbotics.com/assets/images/webots.png">

  <!-- Webots RobotWindow API -->
  <script type="module">
    import RobotWindow from 'https://cyberbotics.com/wwi/R2025a/RobotWindow.js';
    window.robotWindow = new RobotWindow();
  </script>

  <script type="text/javascript">
    // -----------------------------
    // ë©”ì‹œì§€ ì†¡ì‹  / ìˆ˜ì‹  í•¨ìˆ˜
    // -----------------------------
    function sendUserMessage() {
      const userInput = document.getElementById('userInput').value.trim();
      if (userInput === '') return;
      robotWindow.send(userInput);
      document.getElementById('userInput').value = '';
    }

    function sendCommand(cmd) {
      robotWindow.send(cmd);
    }

    window.onload = () => {
      // ì»¨íŠ¸ë¡¤ëŸ¬ â†’ ìœˆë„ìš° ë©”ì‹œì§€ ìˆ˜ì‹ 
      robotWindow.receive = (message) => {
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = message;
      };

      // ì—”í„° í‚¤ë¡œ ì „ì†¡
      document.getElementById('userInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') sendUserMessage();
      });
    };
  </script>

  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f8f9fa;
      color: #333;
      padding: 20px;
    }
    h2 {
      color: #007bff;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }
    button:hover {
      opacity: 0.85;
    }
    .control-box {
      padding: 15px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    #userInput {
      width: 300px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #content {
      font-size: 14px;
      color: #555;
      margin-bottom: 10px;
      min-height: 24px;
    }
  </style>
</head>

<body>
  <h2>ğŸ¤– UR10e Interactive Control Panel</h2>
  <p id="content">ì»¨íŠ¸ë¡¤ëŸ¬ ìƒíƒœ ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>

  <div class="control-box">
    <h3>ğŸ® Arm Control</h3>
    <button style="background-color: #007bff; color: white;" onclick="sendCommand('íŒ”ì„ ë“¤ì–´ì˜¬ë ¤')">Lift Arm</button>
    <button style="background-color: #6f42c1; color: white;" onclick="sendCommand('íŒ”ì„ ë‚´ë ¤')">Lower Arm</button>
    <button style="background-color: #17a2b8; color: white;" onclick="sendCommand('íŒ”ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ íšŒì „')">Rotate Right</button>
    <button style="background-color: #ffc107; color: black;" onclick="sendCommand('íŒ”ì„ ì™¼ìª½ìœ¼ë¡œ íšŒì „')">Rotate Left</button>
  </div>

  <div class="control-box">
    <h3>âœ‹ Gripper Control</h3>
    <button style="background-color: #28a745; color: white;" onclick="sendCommand('ê·¸ë¦¬í¼ ì—´ì–´')">Open Gripper</button>
    <button style="background-color: #dc3545; color: white;" onclick="sendCommand('ê·¸ë¦¬í¼ ë‹«ì•„')">Close Gripper</button>
  </div>

  <div class="control-box">
    <h3>ğŸ’¬ Natural Language Command</h3>
    <input type="text" id="userInput" placeholder="ì˜ˆ: íŒ”ì„ ë“¤ì–´ì˜¬ë¦¬ê³  ê·¸ë¦¬í¼ ë‹«ì•„" />
    <button style="background-color: #007bff; color: white;" onclick="sendUserMessage()">Send</button>
    <p style="font-size: 12px; color: #666;">Press Enter to send</p>
  </div>
</body>
</html>
